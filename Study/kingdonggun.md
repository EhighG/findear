---
---
---
24.03.05  
---
---
---
# 게임 서버
## 게임 통신 방식에 따른 서버 분류
서버를 구분하는데 있어 가장 기본적인 것은 통신 방식. 
플레이어끼리 반드시 실시간 상호소통이 필요한가?
- 게임 플레이가 실시간으로 반드시 통신이 필요한 경우 - 동기적 서버 구현
	- tcp/udp를 이용한 소켓 통신, rpc(remote procedure calls) 사용
	- 재화, 아이템 구매 등의 단순 저장 데이터의 경우 웹 서버 운영
- 실시간 통신이 필요하지 않는 경우 - 비동기 서버 구현
	- stateless한 http 통신을 하는 웹 서버 이용
		- 일반 웹 어플리케이션과 구조가 다름
	- 플레이어와 서버의 단 방향 통신
	- 서버의 수평적 확장이 용이하며 클라이언트 보안에 취약
	- 키우기형, 방치형 등 랭킹 경쟁 류의 모바일 게임

그렇다면 stateful한 서버의 특징은?
- 클라이언트와 1:1 연결이 보장되어야 함
	- 양방향 통신
	- 클라가 서버에 행동을 요청하고 접속한 모든 클라에게 데이터를 보냄(데이터 동기화 broadcast)
	- 모든 클라가 서버에 연결되어 수직적 확장으로 서비스 운영
	- 수평적 확장을 위해서는 각각의 게임 서버를 늘리는 방식
## 포톤 클라우드와 통신 방식
- 포톤 클라우드
	- 유니티 전용 네트워크 엔진
	- Room 기반의 서버 아키텍쳐
	- 소규모 인원이 한 방에서 진행하는 게임에 적합한 엔진
	- 동기화 방식
		- PhotonView
			- Observer pattern으로 설계되어 있음
			- photonView 객체가 오브젝트의 움직임 감시
			- 변경 생길 시 모든 클라에 전송
			- 네트워크 부하가 많이 발생
		- Remote Procedure Calls(RPC) 
			- 게임 안 오브젝트에게 특정 함수를 실행하도록 요청
			- 한 번의 호출로 로컬 상에서 클라의 움직임을 동기화
			- 서버에서 각 로컬에 함수를 요청하는 방식
			- 네트워크 부하 감소
			- 코드 로직이 클라에 들어가서 보안에 취약함

## 소켓 프로그래밍의 이해
- 소켓
	- 네트워크 상에서 돌아가는 두 프로그램의 접속점
	- IP와 port의 조합으로 이뤄진 엔드포인트를 바탕으로 연결
	- 클라의 소켓 연결 요청과 서버의 연결 수락이 이뤄지면 데이터를 양방향으로 주고받을 수 있음
	- 특징
		- 패킷이라는 형식화된 데이터 메모리 단위로 통신
		- 실시간 양방향 통신
		- stateful하여 서버가 클라의 상태를 저장
		- 서버가 메모리에 데이터를 저장하며 통신하는 것도 가능
	- 패킷 데이터 만들기
		- 연결된 클라와 서버가 통신을 주고받기 위한 일종의 데이터 규약
		- 패킷의 공통 헤더와 메시지를 버퍼를 이용하여 확장성 있게 구현
	- 싱글 스레드 소켓 서버
		- 모든 소켓 연결이 하나의 쓰레드에서 이뤄짐
	- 멀티 쓰레드 소켓 서버 
		- 열 개의 소켓이 생기면 열 개의 쓰레드가 생김

# 회고 및 다짐
오늘 기획을 마쳤다. 대체와 공존, 이 중에서 무엇을 기준으로 우리는 서비스할 것인가? 결국 우리는 공존을 선택했다. 나는 어느 쪽이든 괜찮다는 생각도 가지지만 공존의 경우 우리가 현재 존재하는 서비스보다 가지는 특장점이 필요하다는 생각이 계속 들어서 내켰다. 이를 기획을 하면서 아이디어를 냈고, 꽤나 그럴싸한 전략을 생각해낸 것 같아서 이제 조금 마음 편하게 일을 시작할 수 있을 것 같다. 
이제 내가 해야할 일은 서버 아키텍쳐 설계와 깃 설정. 취업 준비도 해야 하는데 내가 할 수 있는 일에 한계가 있는 것 같아서 심란하다. 매사에 열심히 하면 결국 모든 게 나의 자산이 되겠지만, 취업이 절박한 현재는 조금 더 치밀하고 합리적인 판단을 내릴 필요가 있다. 끝까지 가면 다 이기겠지만, 지금은 그 끝을 면밀하게 생각해야한다. 그럼에도 주어진 일은 분명 열심히 하고 싶다.   

---
---
---
24.03.05  
---
---
---
# DB 설계의 기초

- 디비 모델링 순서
	- 요구사항 수집 및 분석
		- 사용자 식별
		- 디비 용도 식별
	- 개념적 모델링
		- 엔터티 도출
		- ERD 도출
	- 논리적 모델링
		- ERD-DB 모델 사상
		- 상세 속성 정의
		- 정규화
	- 물리적 모델링
		- 실제 모델링

# 깃 설정
- 깃 커밋 시 지라 이슈 번호 자동 삽입
- 파일 대소문자 구별
- 커밋 시 메시지 나오도록 수정
- 브랜치 이름 변경 시 바로 원격에도 반영되도록 수정(보류)
- 커밋 시 제목 제대로 지정하도록 설정

깃 훅 세팅
https://git-scm.com/book/ko/v2/Git%EB%A7%9E%EC%B6%A4-Git-Hooks

커밋 이름 세팅은 commit-msg 훅으로
https://www.lesstif.com/lpt/linux-cut-93127007.html

브랜치 이름 변경을 이벤트로 걸기는 어려워서 일단 원격 반영은 보류.

# 알림 설정
머지 리퀘스트가 올라왔을 때 리뷰어로 지정된 대상을 멘션하는 기능을 추가하면 좋을 것이라 생각했으나 시간이 많이 소요될 것 같아서 보류-

# 시스템 아키텍쳐 설계
무중단 배포. 
그러면 배포만 무중단으로 하면 될까?
배포와 개발용은 구분할 것인데.

# 회고 및 다짐
오늘은 운동을 쉬고 집안일하면서 자소서를 다듬었다. 본격적으로 서버 아키텍쳐를 구상 중인데 무중단 배포와 동시에 몇가지 서버를 체계적으로 관리하기 위해 어떤 식으로 해야할까 고민이 많다. 기왕이면 개발자들은 본인 개발하는 대로 편하게 집중할 수 있도록 해주고 싶어서 내가 설정할 수 있는 영역은 내가 최대한 맡고 싶다. 
